webpackJsonp([14],{"57Bv":function(t,e,a){"use strict";function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=a("KM04"),s=a("E/bI"),d=a("diX/"),p=a("v4O/"),u=a("7aq3"),b=a("s4wh"),h=(a("sw5u"),a("Y5jM")),f=a.n(h),y=a("DEwm"),O=a("ufjx"),m=a("Au7/"),j=a("uO0A"),_=a("faXx"),g=a("xVFv"),v=a("wdDn"),S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},T="Other Resources",C="Regular Resources",k=Object(l.h)(O.a,null),D=Object(l.h)(v.a,null),w=Object(l.h)(v.a,null),x=Object(l.h)(v.a,null),L=Object(l.h)(v.a,null),W=Object(l.h)(v.a,null),M=function(t){function e(e){var a=o(this,t.call(this,e));return a.onSelectType=function(t,e){var o;"fundStream"==t&&a.setState({fundStream:S({},a.state.fundStream,{value:e.value?e.value:"",label:e.label?e.label:""})}),a.setState({filterObj:S({},a.state.filterObj,(o={},o[t]=S({},a.state.filterObj[t],{value:e.value?e.value:"",label:e.label?e.label:""}),o))},function(){a.props.getFilteObjectValue&&a.props.getFilteObjectValue(a.state.filterObj),a.props.donorFetchData(a.state.filterObj,a.state.tabSelected)})},a.createCheckList=function(t){var e=a.state.baseUrl;a.state.checkList.forEach(function(t,a){e=0==a?e+t.key+"="+t.flag:e+"&"+t.key+"="+t.flag}),a.setState({selectionListUrl:e},function(){void 0!==t&&t()})},a.handleOnSelect=function(t,e){var o=a.state.checkList.map(function(a){return a.key==e.key?{flag:t.target.checked,label:a.label,key:a.key}:a});a.setState({checkList:o},function(){a.createCheckList()})},a.clearSelect=function(){var t=a.state.checkList.map(function(t){return{flag:a.initialChecklist[t.key],label:t.label,key:t.key}});a.setState({checkList:t})},a.handleClose=function(){a.props.handleClose(a.clearSelect)},a.accordionClick=function(t){a.state.accordionSelected==t?(document.body.className="",a.setState({accordionSelected:""})):(document.body.className=f.a.accordionScroll,a.setState({accordionSelected:t}),a.tabClick(t))},a.tabClick=function(t){a.setState({tabSelected:t,filterObj:S({},a.state.filterObj,{fundType:t,fundStream:S({},a.state.fundStream,{value:t!==T?"":a.state.fundStream.value,label:t!==T?"":a.state.fundStream.label})})},function(){a.props.getDataTabClick&&a.props.getDataTabClick(a.state.filterObj),a.props.donorFetchData(a.state.filterObj,a.state.tabSelected)})},a.tooltipHover=function(t,e){var o=window.outerWidth,r=t.clientX,n=t.clientY;r+220>o&&(r=o-245),a.setState({showtooltip:!0,tooltipData:e,tooltipPosition:[r,n]})},a.tooltipOut=function(){a.setState({showtooltip:!1})},a.map={donorType:"Donor Type",fundStream:"Fund Stream"},a.state={showtooltip:"",tooltipData:"",tooltipPosition:[0,0],filterObj:{year:a.props.yearList.list[0],donorType:{value:"",label:""},fundType:"",fundStream:{value:"",label:""}},fundStream:{value:"",label:""},total:{},regular:{},others:{},currentTab:"total",tabSelected:"",accordionSelected:"",selectionListUrl:window.location.origin+"/embed/donors?",baseUrl:window.location.origin+"/embed/donors?",checkList:[{flag:!0,label:"Title",key:"title"},{flag:!0,label:"Summary",key:"summary"},{flag:!0,label:"Stats",key:"stats"},{flag:!0,label:"Total",key:"total"},{flag:!1,label:"Regular",key:"regular"},{flag:!1,label:"Others",key:"others"}],displayEmbedModal:!1},a.initialChecklist={title:!0,summary:!0,stats:!0,total:!0,regular:!1,others:!1},a}return r(e,t),e.prototype.componentWillReceiveProps=function(t){var e=this;this.props.yearList.currentYear!==t.yearList.currentYear&&this.setState({filterObj:S({},this.state.filterObj,{year:t.yearList.currentYear})},function(){e.props.donorFetchData(e.state.filterObj,e.state.tabSelected)})},e.prototype.componentWillUnmount=function(){document.body.className=""},e.prototype.componentWillMount=function(){this.props.donorTypesFetchData(),this.props.fundStreamsFetchData(),this.props.donorFetchData(this.state.filterObj,this.state.tabSelected)},e.prototype.render=function(t,e){var a=this,o=e.tabSelected,r=e.filterObj,n="&year="+r.year+"&donorType="+r.donorType.value+"&donorTypelabel="+r.donorType.label+"&fundType="+r.fundType+"&fundStream="+r.fundStream.value+"&fundStreamlabel="+r.fundStream.label,i=t.donorData,c=i.data,s=c&&c.regular_percentage?c.regular_percentage:50,d=c&&c.other_percentage?c.other_percentage:50,p=c&&c.total_contributions?c.total_contributions:0,u=c&&c.regular_contribution?c.regular_contribution:0,b=c&&c.other_contributions?c.other_contributions:0,h=c&&c.regular_percentage&&c.other_percentage&&0!=c.regular_percentage&&0!=c.other_percentage;return Object(l.h)("div",null,i.loading&&k,Object(l.h)("div",{style:h?{display:"block"}:{display:"none"}},Object(l.h)("div",{class:f.a.detailViewWrapper},Object(l.h)("div",{class:f.a.detailView},Object(l.h)("div",{class:f.a.statsWrapper},Object(l.h)("span",{class:f.a.stats},"Total Contribution:",Object(l.h)("span",null,Object(m.e)(p)))),Object(l.h)("div",{class:f.a.contributionBarWrapper},Object(l.h)("div",{class:f.a.barTextWrapper},Object(l.h)("div",{class:f.a.tooltipContainer+" "+f.a.barTextLeft},Object(l.h)("div",{class:f.a.textLabel},"Regular"),Object(l.h)("span",{class:f.a.tooltipDonors+" "+f.a.regularTooltip},"voluntary, non-earmarked contributions")),Object(l.h)("div",{class:f.a.tooltipContainer+" "+f.a.barTextRight},Object(l.h)("div",{class:f.a.textLabel},"Other"),Object(l.h)("span",{class:f.a.tooltipDonors+" "+f.a.otherTooltip},"Contributions earmarked for specific programmes, projects, or thematic areas"))),Object(l.h)("div",{class:f.a.barContainer},Object(l.h)("span",{class:f.a.contributionBar+" "+f.a.leftTooltip,style:{width:s+"%",backgroundColor:"#16537d"},onMouseOver:function(t){return a.tooltipHover(t,"voluntary, non-earmarked contributions")},onMouseOut:function(){return a.tooltipOut()}}),Object(l.h)("span",{class:f.a.contributionBar+" "+f.a.rightTooltip,style:{width:d+"%",backgroundColor:"#52abe9"},onMouseOver:function(t){return a.tooltipHover(t,"Contributions earmarked for specific programmes, projects, or thematic areas")},onMouseOut:function(){return a.tooltipOut()}}),Object(l.h)("span",{class:this.state.showtooltip?f.a.totalOther:f.a.noTooltip,style:{top:this.state.tooltipPosition[1]+"px",left:this.state.tooltipPosition[0]+"px"}},this.state.tooltipData)),Object(l.h)("div",{class:f.a.barTextWrapper},Object(l.h)("div",{class:f.a.barTextLeft},Object(m.d)(u,2)),Object(l.h)("div",{class:f.a.barTextRight},Object(m.d)(b,2))),Object(l.h)("div",{class:f.a.barTextWrapper},Object(l.h)("div",{class:f.a.barTextLeft+" "+f.a.textPerc},"(",s,"%)"),Object(l.h)("div",{class:f.a.barTextRight+" "+f.a.textPerc},"(",d,"%)"))))),Object(l.h)("div",{class:f.a.dropdowndonorWrapper},Object(l.h)("div",{class:f.a.dropdowndonorInnerWrapper},Object(l.h)("div",{class:f.a.donorType},Object(l.h)(y.a,{label:"Donor Type",filterClass:f.a.filter,labelStyle:{display:"block",marginLeft:0,marginBottom:5,color:"#2d2d2d",fontWeight:400},dropDownClass:f.a.donorTypeDropdown,options:this.props.donorTypes.data,handleClick:function(t){a.onSelectType("donorType",t)},placeHolder:"Select"})),Object(l.h)("div",{class:o===T?""+f.a.fundCategory:""+f.a.displayNone},Object(l.h)(y.a,{label:"Fund Category",filterClass:f.a.filter,labelStyle:{display:"block",marginLeft:15,marginBottom:5,color:"#2d2d2d"},dropDownClass:f.a.dropdown,options:this.props.fundStreams.data,handleClick:function(t){a.onSelectType("fundStream",t)},placeHolder:"Select"})))),Object(l.h)("div",{class:f.a.wrapper},Object(l.h)("div",{class:f.a.desktop},Object(l.h)("div",{class:f.a.btnListWrapper},Object(l.h)("ul",{class:f.a.btnList},Object(l.h)("li",null,Object(l.h)("button",{class:""==o&&f.a.active,onClick:function(){return a.tabClick("")}},"Total")),Object(l.h)("li",{class:f.a.tooltipContainer+" "+f.a.tabTooltip},Object(l.h)("button",{class:o==C&&f.a.active,onClick:function(){return a.tabClick(C)}},"Regular"),Object(l.h)("span",{class:f.a.tooltipDonors+" "+f.a.tabTooltip},"voluntary, non-earmarked contributions")),Object(l.h)("li",{class:f.a.tooltipContainer+" "},Object(l.h)("button",{class:o==T&&f.a.active,onClick:function(){return a.tabClick(T)}},"Other"),Object(l.h)("span",{class:f.a.tooltipDonors+" "+f.a.tabTooltip},"Contributions earmarked for specific programmes, projects, or thematic areas")))),Object(l.h)("section",{class:f.a.chartWrapper},i.data&&i.data.data&&i.data.data.country&&0!==i.data.data.country.length&&i.data.data.key?Object(l.h)(j.a,{data:i.data.data.country,donors:"true"}):D),Object(l.h)("div",{class:f.a.disclaimer},"*Funding from financial institutions/development banks shown here only include direct contributions to UNDP, and excludes indirect contributions through government financing funded from financial institution/development bank loans or grants")),Object(l.h)("div",{class:f.a.mobile},Object(l.h)("div",{class:f.a.accordion},Object(l.h)("div",{class:f.a.accordionItem},Object(l.h)("div",{class:""==this.state.accordionSelected?f.a.accordionTitle+" "+f.a.accordionSelected:f.a.accordionTitle,onClick:function(){return a.accordionClick("")}},Object(l.h)("h3",{class:f.a.accordionHead},"Total")),Object(l.h)("div",{class:f.a.accordionContent},""==this.state.accordionSelected?Object(l.h)("section",{class:f.a.chartWrapper},i.data&&i.data.data&&i.data.data.country&&0!==i.data.data.country.length&&i.data.data.key?Object(l.h)(j.a,{data:i.data.data.country,donors:"true"}):w):null)),Object(l.h)("div",{class:f.a.accordionItem},Object(l.h)("div",{class:this.state.accordionSelected==C?f.a.accordionTitle+" "+f.a.accordionSelected+" "+f.a.tooltipContainer:f.a.accordionTitle+" "+f.a.tooltipContainer,onClick:function(){return a.accordionClick(C)}},Object(l.h)("h3",{class:f.a.accordionHead},"Regular"),Object(l.h)("span",{class:f.a.tooltipDonors+" "+f.a.tabTooltip},"voluntary, non-earmarked contributions")),Object(l.h)("div",{class:f.a.accordionContent},this.state.accordionSelected==C?Object(l.h)("section",{class:f.a.chartWrapper},i.data&&i.data.data&&i.data.data.country&&0!==i.data.data.country.length&&i.data.data.key?Object(l.h)(j.a,{data:i.data.data.country}):x):null)),Object(l.h)("div",{class:f.a.accordionItem},Object(l.h)("div",{class:this.state.accordionSelected==T?f.a.accordionTitle+" "+f.a.accordionSelected+" "+f.a.tooltipContainer:f.a.accordionTitle+" "+f.a.tooltipContainer,onClick:function(){return a.accordionClick(T)}},Object(l.h)("h3",{class:f.a.accordionHead},"Others"),Object(l.h)("span",{class:f.a.tooltipDonors+" "+f.a.tabTooltip},"Contributions earmarked for specific programmes, projects, or thematic areas")),Object(l.h)("div",{class:f.a.accordionContent},this.state.accordionSelected==T?Object(l.h)("section",{class:f.a.chartWrapper},i.data&&i.data.data&&i.data.data.country&&0!==i.data.data.country.length&&i.data.data.key?Object(l.h)(j.a,{data:i.data.data.country}):L):null)))))),Object(l.h)("div",{style:h||i.loading?{display:"none"}:{display:"block"}},W),Object(l.h)(g.a,{display:this.props.displayEmbedModal,checkList:this.state.checkList,modifiedUrl:this.state.selectionListUrl+n,handleClose:this.handleClose,getselectedItem:this.getselectedItem,handleOnSelect:this.handleOnSelect}))},e}(l.Component),P=function(t){return{donorData:t.donorData,donorTypes:t.donorTypes,fundStreams:t.fundStreams}},E=function(t){return{donorFetchData:function(e,a){return t(Object(_.m)(e,a))},onSwitchTab:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){return t(onSwitchTab(e))}),donorTypesFetchData:function(){return t(Object(_.n)())},fundStreamsFetchData:function(){return t(Object(_.o)())}}},R=Object(s.a)(P,E,null,{withRef:!0})(M),F=a("GXBc"),I=a("5ttS"),U=a("FJnM"),V=a.n(U),N=a("usUj"),H=a("Y9jh"),B=a("+hMk"),Y=a("9s2J"),X=a.n(Y),J=Object(l.h)(d.a,{active:"donors",title:"Donors",enableSearch:!0,enableBanner:!0}),K=Object(l.h)(p.a,null),q=Object(l.h)(I.a,null),G=function(t){function e(a){n(this,e);var o=i(this,t.call(this,a));return o.openEmbedModal=function(){o.donorsPage.wrappedInstance.createCheckList(),o.setState({displayEmbedModal:!0})},o.handleClose=function(t){o.setState({displayEmbedModal:!1},function(){t()})},o.getDataTabClick=function(t){var e=t.fundType;o.setState({tabName:""===e?["Regular","Other","Total"]:"Regular Resources"===e?["Regular"]:"Other Resources"===e?["Other"]:""})},o.getFilteObjectValue=function(t){o.setState({filterObj:t},function(){})},o.state={displayEmbedModal:!1,filterObj:{},tabSelected:"",tabName:["Regular","Other","Total"]},o}return c(e,t),e.prototype.setPageHeader=function(){this.props.onChangeRoute("Donors"),this.props.setPageHeader({title:"Donors",breadcrumb:[{id:1,title:"Home",link:"/"},{id:2,title:"Donors"}]})},e.prototype.componentDidMount=function(){window.scrollTo(0,0),this.setPageHeader()},e.prototype.hideExportModal=function(){this.setState({showExportModal:!1})},e.prototype.showExportModal=function(){this.setState({showExportModal:!0})},e.prototype.renderExportPopup=function(){var t=this,e=this.state.filterObj.donorType?this.state.filterObj.donorType.value:"",a=this.state.filterObj.fundStream?this.state.filterObj.fundStream.value:"",o=this.state.filterObj.fundType?this.state.filterObj.fundType:"",r=void 0,n=void 0,i=void 0,c=void 0;return this.state.tabName.length>1?c=this.props.donorData.totalData.contributions:"Regular"===this.state.tabName[0]?c=this.props.donorData.regularData.contributions:"Other"===this.state.tabName[0]&&(c=this.props.donorData.otherData.contributions),r={title:"Donors",year:this.props.yearList.currentYear,tabSelected:this.state.tabName,tabMapper:this.state.tabName.length>1?["country","regular_contribution","other_contribution","total_contribution"]:["country","total_contribution"],otherContribution:this.props.donorData.data.other_contributions,regularContribution:this.props.donorData.data.regular_contribution,totalContribution:this.props.donorData.data.total_contributions,OtherPercentage:this.props.donorData.data.other_percentage,regularPercentage:this.props.donorData.data.regular_percentage,donorType:this.state.filterObj.donorType?this.state.filterObj.donorType.label:"",fundStreams:this.state.filterObj.fundStream?this.state.filterObj.fundStream.label:"",aggerateSummary:c,lastUpdatedDate:Object(F.a)(this.props.lastUpdatedDate.data.last_updated_date)},n=this.props.donorData.data.contributions.loading||this.props.fundStreams.loading||this.props.donorData.data.regular_contribution.loading||this.props.donorData.data.total_contributions.loading||this.props.donorData.data.other_percentage.loading||this.props.donorData.data.regular_percentage.loading||this.props.donorTypes.loading,i="donors",Object(l.h)(b.a,{templateType:i,data:r,loading:n,onCloseModal:function(){return t.hideExportModal()},downloadCsv:function(){t.props.downLoadDonorsDetailsCsv(r.year,o,a,e)}})},e.prototype.render=function(){var t=this,e="Donors | UNDP Transparency Portal",a="At the request of the MoH, UNDP procures a range of medicines and medical products as an emergency measure, and builds the capacity needed to support a transparent, cost-effective procurement system for the Ministry.";return Object(l.h)("div",null,this.state.showExportModal?this.renderExportPopup():null,Object(l.h)(V.a,{title:e,meta:[{name:"description",content:a},{property:"og:title",content:e},{property:"og:description",content:a},{property:"twitter:title",content:e},{property:"twitter:description",content:a}]}),J,Object(l.h)("div",{class:X.a.breadCrumbWrapper},K,Object(l.h)(u.a,{onClickEmbed:this.openEmbedModal,showExportModal:function(){return t.showExportModal()}})),Object(l.h)(R,{getFilteObjectValue:this.getFilteObjectValue,ref:function(e){t.donorsPage=e},displayEmbedModal:this.state.displayEmbedModal,yearList:this.props.yearList,handleClose:this.handleClose,getEmbedModalState:this.getEmbedModalState,getDataTabClick:this.getDataTabClick}),q)},e}(l.Component),A=function(t){return{router:t.router,yearList:t.yearList,donorData:t.donorData,donorTypes:t.donorTypes,fundStreams:t.fundStreams,lastUpdatedDate:t.lastUpdatedDate}},z=function(t){return{setPageHeader:function(e){return t(Object(N.a)(e))},onChangeRoute:function(e){return t(Object(H.b)(e))},downLoadDonorsDetailsCsv:function(e,a,o,r){return t(Object(B.b)(e,a,o,r))}}};e.default=Object(s.a)(A,z,null,{withRef:!0})(G)},"9s2J":function(t){t.exports={breadCrumbWrapper:"breadCrumbWrapper__3DExX"}},Y5jM:function(t){t.exports={barTextWrapper:"barTextWrapper__MY2ii",barTextLeft:"barTextLeft__XXN_W",barTextRight:"barTextRight__9a1Rk",barContainer:"barContainer__2IrF-",totalOther:"totalOther__3bGdz",noTooltip:"noTooltip__1K0Jx",textPerc:"textPerc__2LJRU",textLabel:"textLabel__1USzk",dropdowndonorWrapper:"dropdowndonorWrapper__2keXC",dropdowndonorInnerWrapper:"dropdowndonorInnerWrapper__1gVvE",donorType:"donorType__EW-3O",filter:"filter__3Kwaz",donorTypeDropdown:"donorTypeDropdown__3Ur9K",fundCategory:"fundCategory__1mPgw",displayNone:"displayNone__3DrK1",detailViewWrapper:"detailViewWrapper__3XsJw",wrapper:"wrapper__wFVSt",chartWrapper:"chartWrapper__wdm-R",detailView:"detailView__3IYUZ",statsWrapper:"statsWrapper__3E--V",stats:"stats__VtLVw",contributionBarWrapper:"contributionBarWrapper__jfL4Y",contributionBar:"contributionBar__19Veh",barLabel:"barLabel__2Jf4q",barValue:"barValue__9IoSb",mobile:"mobile__jddag",desktop:"desktop__3bMUA",btnListWrapper:"btnListWrapper__sg32r",btnList:"btnList__3qCmB",active:"active__3th5G",tooltipContainer:"tooltipContainer__1mloS",tooltipDonors:"tooltipDonors__TaOqU",regularTooltip:"regularTooltip__1Fr3K",otherTooltip:"otherTooltip__hKPHr",tabTooltip:"tabTooltip__2NPeN",bartextLeft:"bartextLeft__1pi7c",regularBar:"regularBar__-mDB7",accordion:"accordion__1LGQd",accordionItem:"accordionItem__3ZsFy",accordionPosition:"accordionPosition__2f1yi",accordioncontentScroll:"accordioncontentScroll__CirvK",accordionContent:"accordionContent__3LNqR",accordionHead:"accordionHead__1ROUG",accordionTitle:"accordionTitle__165Sv",accordionSelected:"accordionSelected__2fZve",filterIcon:"filterIcon__3PPho",mapIcon:"mapIcon__2y5cU",embedSection:"embedSection__3OaYI",embedImage:"embedImage__8fGVq",exportSection:"exportSection__1p_Mi",noData:"noData__3ykFi",headingText:"headingText__1lygo",type:"type__oIpTx",disclaimer:"disclaimer__2isGv"}}});
//# sourceMappingURL=route-donors.chunk.4bb4b.js.map