webpackJsonp([11],{Pf4u:function(t,e,a){"use strict";function r(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var p=a("KM04"),l=a("E/bI"),d=a("diX/"),h=a("v4O/"),u=a("7aq3"),b=a("wvix"),j=a("yNoq"),m=a("COsE"),f=a("2On6"),g=a("wdDn"),y=a("ufjx"),S=a("Au7/"),O=a("SKpH"),w=a.n(O),D=a("nZhv"),L=a("hafV"),v=Object(p.h)(y.a,null),C=Object(p.h)(y.a,null),k=Object(p.h)("span",null,"Signature Solutions"),x=Object(p.h)(g.a,null),E=Object(p.h)("span",null,"Top 10 Donors"),M=Object(p.h)(m.a,null),Y=Object(p.h)(y.a,null),P=Object(p.h)(g.a,null),W=Object(p.h)("span",null,"Top 10 Recipient Offices"),T=Object(p.h)(m.a,null),U=Object(p.h)(y.a,null),A=Object(p.h)(g.a,null),H=function(t){function e(e,a){var r=o(this,t.call(this,e,a));return r.state={themeSliderData:{},themesMapData:{},projectList:{},listSelected:!1,totalDataSize:0,links:"",projectListArr:[]},r.callSSdata=!0,r}return s(e,t),e.prototype.componentDidMount=function(){this.props.fetchDonorSliderData(this.props.currentYear,this.props.sector_code),this.props.loadThemesMapData(this.props.currentYear,this.props.sector_code)},e.prototype.componentWillReceiveProps=function(t){if(t.currentYear!=this.props.currentYear&&(this.props.fetchDonorSliderData(t.currentYear,this.props.sector_code),this.props.loadThemesMapData(t.currentYear,this.props.sector_code),this.callSSdata=!0),""!==t.endYear&&this.callSSdata&&t.endYear>=L.a.SIGNATURE_SOLUTION_YEAR&&(this.props.fetchSignatureSolutionChartData(this.props.sector_code,t.currentYear),this.callSSdata=!1),Object.keys(t.themeSliderData.data).length&&this.setState({themeSliderData:t.themeSliderData}),Object.keys(t.themesMapData.data).length&&this.setState({themesMapData:t.themesMapData}),Object.keys(t.projectList.projectList.data).length&&this.setState({projectList:t.projectList}),t.projectList.projectList!=this.props.projectList.projectList){var e=t.projectList.projectList.data;this.setState({projectListArr:function(t){return t.forEach(function(t){t.country_name=t.country,t.probObj={title:t.title,project_id:t.project_id},t.total_budget=null==t.budget?0:t.budget,t.total_expense=null==t.expense?0:t.expense}),t}(e),totalDataSize:t.projectList.projectList.count,links:t.projectList.projectList.links})}},e.prototype.render=function(t,e){var a=this,o=e.totalDataSize,s=e.themesMapData,i=e.themeSliderData,n=e.projectListArr;r(t);var c=Object.keys(this.state.themeSliderData).length,l=Object.keys(this.state.themesMapData).length,d=(this.state.projectList&&this.state.projectList.projectList&&Object.keys(this.state.projectList.projectList),c?i.data&&i.data.aggregate:{}),h=c?i.data&&i.data.budget_sources:{},u=c?i.data&&i.data.top_recipient_offices:{},_=l?s&&s.data&&s:{},i=this.props.themeSliderData;return Object(p.h)("div",{class:w.a.profile_page_container},Object(p.h)("div",{class:w.a.wrapper},Object(p.h)("div",null,i.loading?Object(p.h)("div",{style:{position:"relative",height:83}},v):Object(p.h)("ul",{class:w.a.list},Object(p.h)("li",null,Object(p.h)("span",{class:w.a.value},d.budget_amount&&Object(S.d)(d.budget_amount,2)),Object(p.h)("span",{class:w.a.label},"Budget")),Object(p.h)("li",null,Object(p.h)("span",{class:w.a.value},d.expense_amount&&Object(S.d)(d.expense_amount,2)),Object(p.h)("span",{class:w.a.label},"Expense")),Object(p.h)("li",null,Object(p.h)("span",{class:w.a.value},d.projects&&Object(S.c)(d.projects)),Object(p.h)("span",{class:w.a.label},"Projects")),Object(p.h)("li",null,Object(p.h)("span",{class:w.a.value},d.budget_sources&&Object(S.c)(d.budget_sources)),Object(p.h)("span",{class:w.a.label},"Donors"))))),Object(p.h)("div",{class:w.a.mapWrapper,style:this.state.listSelected&&{height:"auto"}},Object(p.h)("span",{class:w.a.mapSwitchContainer},Object(p.h)("span",{class:w.a.mapSwitch},Object(p.h)("button",{class:this.state.listSelected?w.a.mapBtn:w.a.mapBtn+" "+w.a.mapSelected,onClick:function(){return a.setState({listSelected:!1})}},"Map"),Object(p.h)("button",{class:this.state.listSelected?w.a.mapBtn+" "+w.a.listSelected:w.a.mapBtn,onClick:function(){return a.setState({listSelected:!0})}},"List"))),Object(p.h)("div",null,Object(p.h)("div",{style:{paddingTop:"9px",display:this.state.listSelected?"block":"none"}},Object(p.h)(j.a,{count:o,currentYear:this.props.currentYear,theme:this.props.sector_code,data:n,ourFocus:this.props.sector_code})),Object(p.h)("div",{class:w.a.mapContainer,style:{position:"relative",display:this.state.listSelected?"none":"block"}},l?Object(p.h)(b.a,{sector:this.props.sector_code,mapData:_,yearSelected:this.props.endYear}):C,l?Object(p.h)("div",{class:w.a.disclaimer},"* The designations employed and the presentation of material on this map do not imply the expression of any opinion whatsoever on the part of the Secretariat of the United Nations or UNDP concerning the legal status of any country, territory, city or area or its authorities, or concerning the delimitation of its frontiers or boundaries."):null))),Object(p.h)("div",null,this.props.donutChartData.resourcesModalityContribution.data.country[0]?Object(p.h)("section",{class:w.a.theme_slider_wrapper},Object(p.h)("div",{class:w.a.theme_slider_title},k),Object(p.h)("div",null,this.props.donutChartData.resourcesModalityContribution.data.country[0]?Object(p.h)("div",{class:w.a.outcome_chart_wrapper},Object(p.h)(D.a,{donor_wrapper_styles:w.a.outcome_wrapper_styles,donut_styles:w.a.donut_styles,legend_styles:w.a.legend_styles,textWrapperStyle:w.a.textWrapperStyle,textFieldStyle:w.a.textFieldStyle,ourFocusLegendStyles:w.a.our_focus_legend_styles,legendLabel:w.a.legendLabel,data:this.props.donutChartData.resourcesModalityContribution.data.country,legendData:this.props.donutChartData.resourcesModalityContribution.data.total,chartWidth:560,chartHeight:400,chart_id:"signatureSolution_chart"})):x)):null),Object(p.h)("div",{class:w.a.wrapper+" "+w.a.chartWrapper},Object(p.h)("div",{class:w.a.top_budget_sources_wrapper},Object(p.h)("span",{class:w.a.chartHead},E,M),i.loading?Object(p.h)("div",{style:{position:"relative",height:344}},Y):Object(p.h)("div",null,h.length>0?Object(p.h)("div",{class:w.a.budget_sources_wrapper},Object(p.h)(f.a,{chart_id:"themes_profile_budget_sources",width:1250,height:500,min_height:540,data:h,label:"short_name",tspanSize:"12px",textSize:"12px"})):P))),Object(p.h)("div",{class:w.a.wrapper+" "+w.a.chartWrapper},Object(p.h)("div",{class:w.a.top_budget_sources_wrapper},Object(p.h)("span",{class:w.a.chartHead},W,T),i.loading?Object(p.h)("div",{style:{position:"relative",height:344}},U):Object(p.h)("div",null,u.length>0?Object(p.h)("div",{class:w.a.budget_sources_wrapper},Object(p.h)(f.a,{chart_id:"themes_profile_top_recipient_offices",width:1250,height:500,min_height:540,data:u,label:"iso3",tspanSize:"12px",textSize:"12px"})):A))))},e}(p.Component),F=a("yuQp"),B=a("t4UN"),N=a("STnb"),R=a("A1ba"),I=function(t){return{themeSliderData:t.themeSliderData,themesMapData:t.mapData.themesMapData,projectList:t.projectList,donutChartData:t.donorProfile}},z=function(t){return{fetchDonorSliderData:function(e,a){return t(Object(F.b)(e,a))},loadThemesMapData:function(e,a){return t(Object(B.b)(e,a))},updateProjectList:function(e,a,r,o,s,i,n,c){return t(Object(N.c)(e,a,r,o,s,i,n,c))},fetchSignatureSolutionChartData:function(e,a){return t(Object(R.d)(e,a))}}},K=Object(l.a)(I,z)(H),q=a("5ttS"),G=a("xVFv"),V=a("s4wh"),X=a("usUj"),J=a("Y9jh"),Q=a("+hMk"),Z=a("GXBc"),$=a("rw4c"),tt=a("FJnM"),et=a.n(tt),at=a("X7/4"),rt=a.n(at),ot=Object(p.h)(h.a,null),st=Object(p.h)(q.a,null),it=function(t){function e(a,r){i(this,e);var o=n(this,t.call(this,a,r));return o.openEmbedModal=function(){o.createCheckList(o.setState({displayEmbedModal:!0}))},o.handleClose=function(){o.setState({displayEmbedModal:!1},function(){o.clearSelect()})},o.createCheckList=function(t){var e=o.baseUrl;o.state.checkList.forEach(function(t,a){e=0===a?e+t.key+"="+t.flag:e+"&"+t.key+"="+t.flag}),o.setState({selectionListUrl:e},function(){void 0!==t&&t()})},o.handleOnSelect=function(t,e){var a=o.state.checkList.map(function(a){return a.key===e.key?{flag:t.target.checked,label:a.label,key:a.key}:a});o.setState({checkList:a},function(){o.createCheckList()})},o.clearSelect=function(){var t=o.state.checkList.map(function(t){return{flag:o.initialChecklist[t.key],label:t.label,key:t.key}});o.setState({checkList:t})},o.componentDidMount=function(){window.scrollTo(0,0),o.setPageHeader(o.props.type)},o.componentWillReceiveProps=function(t){t.themeSliderData.data.aggregate&&!o.setEndYear&&(o.setEndYear=!0,o.props.updateEndYear(t.themeSliderData.data.aggregate.start_year,t.themeSliderData.data.aggregate.end_year),t.themeSliderData.data.aggregate.end_year<L.a.SIGNATURE_SOLUTION_YEAR&&_.remove(o.state.checkList,function(t){return"signatureSolutions"===t.key}))},o.setEndYear=!1,o.state={displayEmbedModal:!1,checkList:[{flag:!0,label:"Title",key:"title"},{flag:!0,label:"Stats",key:"stats"},{flag:!0,label:"Map",key:"map"},{flag:!1,label:"Project List",key:"projectTable"},{flag:!1,label:"Top Donors",key:"budgetSources"},{flag:!1,label:"Top Recipient Offices",key:"recepientOffices"},{flag:!1,label:"Signature Solutions",key:"signatureSolutions"}],selectionListUrl:window.location.origin+"/embed/themes?",showExportModal:!1},o.baseUrl=window.location.origin+"/embed/themes?",o.initialChecklist={title:!0,map:!0,projectTable:!1,budgetSources:!1,recepientOffices:!1},o}return c(e,t),e.prototype.setPageHeader=function(t){var e="Our Focus";this.props.setPageHeader({title:e,breadcrumb:[{id:1,title:"Home",link:"/"},{id:2,title:e+" - "+t}]}),this.props.onChangeRoute(e+" - "+t),this.setState({pageTitle:e+" - "+t+" | UNDP Transparency Portal"})},e.prototype.showExportModal=function(){this.setState({showExportModal:!0})},e.prototype.hideExportModal=function(){this.setState({showExportModal:!1})},e.prototype.renderExportPopup=function(){var t=this,e=void 0,a=void 0,r=void 0,o=this.props.mapCurrentYear,s=this.props.code;return e={year:this.props.themeSliderData.data.aggregate.year,aggregate:this.props.themeSliderData.data.aggregate,budget_sources:this.props.themeSliderData.data.budget_sources,top_recipient_offices:this.props.themeSliderData.data.top_recipient_offices,mapData:this.props.outputData.data,title:this.props.themeSliderData.data.aggregate.sector_name,projectList:this.props.projectList.projectList,tabSelected:"themes",donutChartData:this.props.donutChartData.resourcesModalityContribution,lastUpdatedDate:Object(Z.a)(this.props.lastUpdatedDate.data.last_updated_date)},a=this.props.projectList.loading||this.props.themeSliderData.loading||this.props.outputData.loading,r="profile_sector",Object(p.h)(V.a,{templateType:r,data:e,loading:a,downloadCsv:function(){t.props.downLoadProjectListCsv(o,"","",s,"","")},onCloseModal:function(){return t.hideExportModal()}})},e.prototype.render=function(){var t=this,e=this.state.pageTitle,a="At the request of the MoH, UNDP procures a range of medicines and medical products as an emergency measure, and builds the capacity needed to support a transparent, cost-effective procurement system for the Ministry.",r="&year="+this.props.currentYear+"&themes="+this.props.code+"&themesLabel="+this.props.type;return Object(p.h)("div",null,this.state.showExportModal?this.renderExportPopup():null,Object(p.h)(et.a,{title:e,meta:[{name:"description",content:a},{property:"og:title",content:e},{property:"og:description",content:a},{property:"twitter:title",content:e},{property:"twitter:description",content:a}]}),Object(p.h)(d.a,{title:this.props.type,enableSearch:!0,enableBanner:!0}),Object(p.h)("div",{class:rt.a.breadCrumbWrapper},ot,""!==this.props.startAndEndYears.startYear?Object(p.h)("section",{class:rt.a.unhide},Object(p.h)(u.a,{showExportModal:function(){return t.showExportModal()},onClickEmbed:this.openEmbedModal,startYear:this.props.startAndEndYears.startYear,endYear:this.props.startAndEndYears.endYear})):null),Object(p.h)(K,{sector_code:this.props.code,currentYear:this.props.currentYear,endYear:this.props.startAndEndYears.endYear}),Object(p.h)(G.a,{display:this.state.displayEmbedModal,checkList:this.state.checkList,modifiedUrl:this.state.selectionListUrl+r,handleClose:this.handleClose,getselectedItem:this.getselectedItem,handleOnSelect:this.handleOnSelect}),st)},e}(p.Component),nt=function(t){return{router:t.router,countryList:t.countryList,currentYear:t.yearList.currentYear,themeSliderData:t.themeSliderData,outputData:t.mapData.outputData,projectList:t.projectList,mapCurrentYear:t.mapData.yearTimeline.mapCurrentYear,lastUpdatedDate:t.lastUpdatedDate,startAndEndYears:t.startAndEndYears,donutChartData:t.donorProfile}},ct=function(t){return{onChangeRoute:function(e){return t(Object(J.b)(e))},setPageHeader:function(e){return t(Object(X.a)(e))},updateEndYear:function(e,a){return t(Object($.b)(e,a))},downLoadProjectListCsv:function(e,a,r,o,s,i){return t(Object(Q.d)(e,a,r,o,s,i))}}};e.default=Object(l.a)(nt,ct)(it)},SKpH:function(t){t.exports={profile_page_container:"profile_page_container__2f93b",wrapper:"wrapper__3_SAw",btnListWrapper:"btnListWrapper__2CUw8",btnList:"btnList__2xUiD",active:"active__MpUog",accessibility:"accessibility__2OHUr",list:"list__XyNDm",value:"value__1eAi5",label:"label__3WFK4",theme_slider_wrapper:"theme_slider_wrapper__27dVY",theme_donut_wrapper:"theme_donut_wrapper__2pAwp",theme_slider_title:"theme_slider_title__iRfFl",outcome_chart_wrapper:"outcome_chart_wrapper__1V0hn",outcome_wrapper_styles:"outcome_wrapper_styles__22b2j",textWrapperStyle:"textWrapperStyle__22_V7",textFieldStyle:"textFieldStyle__1Ch72",our_focus_legend_styles:"our_focus_legend_styles__QLMJm",grouped_bar_chart:"grouped_bar_chart__3dWSW",mapWrapper:"mapWrapper__kF3Qw",mapSwitchContainer:"mapSwitchContainer__3Nic1",mapProjectSwitch:"mapProjectSwitch__TzOJG",mapProjectList:"mapProjectList__3qeTz",mapProjectButton:"mapProjectButton__2AO2J",mapProjectItem:"mapProjectItem__1FgrH",mapSwitch:"mapSwitch__kVI9A",mapBtn:"mapBtn__wXn6v",listSelected:"listSelected__1tpFq",mapSelected:"mapSelected__aEwM4",mapContainer:"mapContainer__KBnK5",filterWrapper:"filterWrapper__3KBpG",chartWrapper:"chartWrapper__2NuTC",recipient_themes_wrapper:"recipient_themes_wrapper__320tF",budget_percent:"budget_percent__3yhZW",windroseWrapper:"windroseWrapper__2tvtA",chartSmall:"chartSmall__kq0SB",chartHead:"chartHead__3uRYo",chartSubHeading:"chartSubHeading__1j4tz",progress:"progress__2s8gr",contribution_wrapper:"contribution_wrapper__3ybsj",groupedBarChart2Wrapper:"groupedBarChart2Wrapper__2c8fH",recipient_charts_wrapper:"recipient_charts_wrapper__3IFyf",wind_rose_wrapper:"wind_rose_wrapper__LLU-G",top_budget_sources_wrapper:"top_budget_sources_wrapper__2a2CG",budget_sources_wrapper:"budget_sources_wrapper__V-u_j",contribution_other_resource_wrapper:"contribution_other_resource_wrapper__rWgPU",recipientDocumentWrapper:"recipientDocumentWrapper__cq27h",dropDownWrapper:"dropDownWrapper__3x6CH",disclaimer:"disclaimer__3jxaU",no_box_shadow:"no_box_shadow__14FXn"}},"X7/4":function(t){t.exports={breadCrumbWrapper:"breadCrumbWrapper__1xIbS",hide:"hide__1NToK",unhide:"unhide__2pIbh"}}});
//# sourceMappingURL=route-themes.chunk.87518.js.map